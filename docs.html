<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>เอกสารดาวน์โหลด | Thanapoom Portfolio</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* --- STYLE: GitHub Theme --- */
        :root {
            --primary: #1a2a6c;
            --accent: #fdbb2d;
            --dark: #24292f; 
            --border: #d0d7de; 
            --hover-bg: #f6f8fa; 
            --link-color: #0969da;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Sarabun', sans-serif; }
        body { background: #ffffff; color: var(--dark); line-height: 1.6; }

        /* NAV BAR */
        nav { background: var(--primary); padding: 1rem; position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        .nav-container { max-width: 1200px; margin: auto; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-weight: bold; font-size: 1.5rem; letter-spacing: 1px; color: var(--accent); text-decoration: none; }
        .nav-menu { display: flex; gap: 30px; list-style: none; }
        .nav-link { color: rgba(255,255,255,0.8); text-decoration: none; font-weight: 500; transition: 0.3s; position: relative; }
        .nav-link:hover, .nav-link.active { color: var(--accent); }
        .nav-link.active::after { width: 100%; }
        .nav-link::after { content: ''; position: absolute; width: 0; height: 2px; bottom: -5px; left: 0; background-color: var(--accent); transition: width 0.3s; }
        .hamburger { display: none; color: white; font-size: 1.8rem; cursor: pointer; }
        .desktop-only { display: flex; align-items: center; gap: 10px; color: #ffcf5c; font-size: 0.9rem; font-weight: bold;}

        /* CONTAINER */
        .container { max-width: 980px; margin: 40px auto; padding: 0 20px; }
        
        .page-header { margin-bottom: 20px; display: flex; align-items: center; gap: 15px; }
        .profile-mini { width: 40px; height: 40px; border-radius: 50%; background: #ddd; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .profile-mini img { width: 100%; height: 100%; object-fit: cover; }
        .repo-title { font-size: 1.2rem; color: var(--link-color); font-weight: 600; text-decoration: none; }
        .badge-public { border: 1px solid var(--border); border-radius: 20px; padding: 2px 10px; font-size: 0.75rem; color: #57606a; margin-left: 10px; }

        /* FILE LIST BOX */
        .file-box { border: 1px solid var(--border); border-radius: 6px; overflow: hidden; min-height: 200px; position: relative;}
        
        /* Loading Spinner */
        #loading {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            display: flex; flex-direction: column; align-items: center; gap: 10px;
            color: #57606a;
        }
        .spinner { border: 4px solid #f3f3f3; border-top: 4px solid var(--primary); border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .file-header { background: #f6f8fa; padding: 16px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; font-size: 0.9rem; }
        .last-commit { display: flex; align-items: center; gap: 10px; color: #57606a; }
        
        /* ROWS */
        .file-row {
            display: grid;
            grid-template-columns: 40px 1fr 120px; /* Icon | Name | Size */
            padding: 10px 16px;
            border-top: 1px solid var(--border);
            align-items: center;
            transition: 0.2s;
            background: white;
            text-decoration: none;
            color: inherit;
        }
        .file-row:first-of-type { border-top: none; }
        .file-row:hover { background-color: var(--hover-bg); }

        .icon-col { color: #7d8590; text-align: center; }
        .name-col { font-weight: 600; color: var(--dark); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; padding-right: 15px; }
        .size-col { color: #57606a; font-size: 0.85rem; text-align: right; }

        @media (max-width: 768px) {
            .nav-menu { display: none; }
            .hamburger { display: block; }
            .desktop-only { display: none; }
            .file-row { grid-template-columns: 30px 1fr; }
            .size-col { display: none; }
        }
        footer { text-align: center; padding: 40px; color: #57606a; font-size: 0.85rem; border-top: 1px solid #eee; margin-top: 50px;}
    </style>
</head>
<body>

    <nav>
        <div class="nav-container">
            <a href="index.html" class="logo">THANAPOOM<span style="color:white">.P</span></a>
            <ul class="nav-menu" id="navMenu">
                <li><a href="index.html" class="nav-link">หน้าหลัก</a></li>
                <li><a href="works.html" class="nav-link">ผลงาน</a></li>
                <li><a href="education.html" class="nav-link">ประวัติการศึกษา</a></li>
                <li><a href="docs.html" class="nav-link active">เอกสาร</a></li>
                <li><a href="contact.html" class="nav-link">ติดต่อ</a></li>
            </ul>
            <div class="desktop-only"><i class="fas fa-code-branch"></i> main</div>
            <div class="hamburger" onclick="toggleMenu()"><i class="fas fa-bars"></i></div>
        </div>
    </nav>

    <div class="container">
        
        <div class="page-header">
            <div class="profile-mini"><i class="fas fa-user-astronaut"></i></div>
            <div>
                <span class="repo-title">Thanapoom-Portfolio / <span style="font-weight:bold">docs</span></span>
                <span class="badge-public">Public</span>
            </div>
        </div>

        <div class="file-box">
            
            <div class="file-header">
                <div class="last-commit">
                    <img src="https://ui-avatars.com/api/?name=Thanapoom&background=random" style="width:20px; height:20px; border-radius:50%;" alt="User">
                    <span style="font-weight:bold; color:var(--dark);">Thanapoom.P</span> 
                    <span>ไฟล์ทั้งหมดจาก GitHub (Auto Sync)</span>
                </div>
            </div>

            <div id="file-list-container">
                <div id="loading">
                    <div class="spinner"></div>
                    <span>กำลังดึงข้อมูลไฟล์...</span>
                </div>
            </div>

        </div>

        <div style="margin-top:20px; padding:20px; border:1px solid #ddd; border-radius:6px;">
            <h3 style="margin-bottom:10px;"><i class="fas fa-book-reader"></i> README.md</h3>
            <hr style="border:0; border-top:1px solid #eee; margin-bottom:15px;">
            <p><strong>ระบบคลังเอกสารอัตโนมัติ</strong></p>
            <p style="color:#666;">ไฟล์ทั้งหมดในหน้านี้ถูกดึงข้อมูลมาจากโฟลเดอร์ <code>docs/</code> ใน GitHub Repository โดยตรง<br>เมื่อมีการอัปโหลดไฟล์ใหม่ขึ้น GitHub รายการจะปรากฏที่นี่ทันที</p>
        </div>

    </div>

    <footer>
        <p>© 2025 Thanapoom Daengpradub</p>
    </footer>

    <script>
        // --- ⚙️ ตั้งค่า GitHub ให้ตรงกับของกีแล้วครับ ✅ ---
        const GITHUB_USERNAME = "KeeXLab-TH"; 
        const REPO_NAME = "KeeXLab-TH.github.io";
        const FOLDER_PATH = "docs"; 
        // ------------------------------------------

        async function fetchDocs() {
            const container = document.getElementById('file-list-container');
            const apiUrl = `https://api.github.com/repos/${GITHUB_USERNAME}/${REPO_NAME}/contents/${FOLDER_PATH}`;

            try {
                const response = await fetch(apiUrl);
                
                if (!response.ok) throw new Error("หาโฟลเดอร์ไม่เจอ หรือ Repo เป็น Private");
                
                const data = await response.json();
                
                // เคลียร์ Loading ออก
                container.innerHTML = '';

                // วนลูปสร้างรายการไฟล์
                data.forEach(file => {
                    // ไม่แสดงไฟล์ index หรือ readme ซ้ำ หรือไฟล์ระบบ
                    if(file.name === 'index.html' || file.name === 'README.md' || file.name.startsWith('.')) return;

                    // เลือกไอคอนตามนามสกุล
                    let iconClass = 'far fa-file';
                    let color = '#7d8590';
                    const ext = file.name.split('.').pop().toLowerCase();

                    if(['pdf'].includes(ext)) { iconClass = 'far fa-file-pdf'; color = '#e74c3c'; }
                    else if(['doc','docx'].includes(ext)) { iconClass = 'far fa-file-word'; color = '#2b579a'; }
                    else if(['zip','rar','7z'].includes(ext)) { iconClass = 'far fa-file-archive'; color = '#f39c12'; }
                    else if(['jpg','png','jpeg','gif'].includes(ext)) { iconClass = 'far fa-image'; color = '#27ae60'; }
                    else if(['ppt','pptx'].includes(ext)) { iconClass = 'far fa-file-powerpoint'; color = '#c0392b'; }
                    else if(['xls','xlsx'].includes(ext)) { iconClass = 'far fa-file-excel'; color = '#217346'; }

                    // คำนวณขนาดไฟล์ (KB/MB)
                    let sizeStr = '';
                    if(file.size < 1024) sizeStr = file.size + ' B';
                    else if(file.size < 1048576) sizeStr = (file.size/1024).toFixed(1) + ' KB';
                    else sizeStr = (file.size/1048576).toFixed(1) + ' MB';

                    // สร้าง HTML Link
                    const html = `
                        <a href="${file.download_url}" class="file-row" target="_blank">
                            <div class="icon-col"><i class="${iconClass}" style="color:${color}"></i></div>
                            <div class="name-col">${file.name}</div>
                            <div class="size-col">${sizeStr}</div>
                        </a>
                    `;
                    container.innerHTML += html;
                });

                if(data.length === 0) {
                    container.innerHTML = '<div style="padding:20px; text-align:center;">ไม่พบไฟล์ในโฟลเดอร์ docs</div>';
                }

            } catch (error) {
                console.error(error);
                container.innerHTML = `
                    <div style="padding:20px; text-align:center; color:red;">
                        <i class="fas fa-exclamation-circle"></i> โหลดข้อมูลไม่สำเร็จ<br>
                        <small>กรุณาตรวจสอบว่าใน GitHub มีไฟล์ในโฟลเดอร์ docs แล้วหรือยัง</small>
                    </div>
                `;
            }
        }

        // เริ่มทำงานเมื่อเปิดหน้าเว็บ
        fetchDocs();

        function toggleMenu() {
            const menu = document.getElementById("navMenu");
            if(menu.style.display === "flex") {
                menu.style.display = "none";
            } else {
                menu.style.display = "flex";
                menu.style.flexDirection = "column";
                menu.style.position = "absolute";
                menu.style.top = "70px";
                menu.style.left = "0";
                menu.style.width = "100%";
                menu.style.background = "#1a2a6c";
                menu.style.padding = "20px";
                menu.style.zIndex = "999";
            }
        }
    </script>
</body>
</html>
